webpackJsonp([12],{0:function(e,n,s){e.exports=s(176)},45:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.controller("QuotesController",["$scope","$http","ApiService",function(e,n,o){s(63),e.post=function(e){return o.post("quotes/",e)},e.table_object=null,e.customer_type="Customer",e.choices={},e.customer_form={},e.order={physical_add:{owner:"",street:"",postcode:"",state:"",suburb:""},delivery_add:{name:"",street:"",postcode:"",state:"",suburb:""},invoice_add:{name:"",street:"",postcode:"",state:"",suburb:""},customer:{partner_name:""}},e.order.desired_dd_day=1,e.order.desired_dd_month=2,e.order.desired_dd_year=2016,e.days=[],e.months=[],e.years=[];for(var r=new Date,l=1;l<=31;l++)e.days.push(l);for(var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=0;t<12;t++)e.months.push([t,a[t]]);for(var d=0;d<=20;d++)e.years.push(r.getFullYear()+d);e.post({type:"get_new_pre_data"}).then(function(n){e.choices.dealerships=n.data.list.dealers,e.choices.states=n.data.list.states});var i=function(){return{type:"get_list",search:e.search_id}};e.ajax_config={url:"/api/quotes/",data:i,dataSrc:"list",columns:[{data:"created",title:"Date Created"},{data:"quote_type",title:"Type"},{data:"quoted_for",title:"Quoted For"},{data:"series",title:"Series"},{data:"sales_person",title:"Sales Person"},{data:"retail_price",title:"$ Retail Sale Price"},{data:"",title:""}]},e.table_config={oLanguage:{sLoadingRecords:'<img src="/static/newage/images/rolling.gif">'},bFilter:!1,bLengthChange:!1,columnDefs:[{targets:-1,data:"id",render:function(e,n,s,o){return'<a class="btn btn-default" href="edit_quote?id='+s.id+'">Manage</a>'}}]},e.search=function(n){e.search_id=n.id,e.table_object.ajax.reload()},e.select_physical_suburb=function(n){e.order.physical_add.suburb=n.suburb,e.order.physical_add.postcode=n.postcode,e.order.physical_add.state=n.state_id},e.select_delivery_suburb=function(n){e.order.delivery_add.suburb=n.suburb,e.order.delivery_add.postcode=n.postcode,e.order.delivery_add.state=n.state_id},e.select_invoice_suburb=function(n){e.order.invoice_add.suburb=n.suburb,e.order.invoice_add.postcode=n.postcode,e.order.invoice_add.state=n.state_id},e.add_customer_quote=function(n){n.$valid&&e.post({type:"add_customer_quote",data:e.order}).then(function(n){"fail"===n.data.result?(e.order.insert_successful_message="",e.order.insert_failed_message=n.data.message):(e.order.insert_failed_message="",e.order.insert_successful_message=n.data.message)})}}])},e.exports=n.default},63:function(e,n){},176:function(e,n,s){"use strict";var o=s(10);s(45)(o),o.config(["$stateProvider",function(e){e.state("new",{url:"",template:s(311),controller:"QuotesController"})}])},311:function(e,n){e.exports='<top-bar>\n    <h2>Create New Quote</h2>\n    <div class="row top-bar-info">\n        <div class="col-sm-2" ng-if="current_dealership()">\n            <h5>Dealership</h5>\n            <h4>{{ current_dealership().title }}</h4>\n        </div>\n        <div class="col-sm-2" ng-if="order.model && order.series">\n            <h5>Model</h5>\n            <h4>{{ info.model_detail.title }}</h4>\n            {{ info.series_detail.title }}\n        </div>\n        <div class="col-sm-2" ng-if="order.model && order.series">\n            <h5>Retail Sale price</h5>\n            <h4 ng-if="info.show_price">{{ info.series_detail.rrp | currency }}</h4>\n            <a href="" ng-click="info.show_price = !info.show_price">\n                <span ng-if="info.show_price">Hide </span>\n                <span ng-if="!info.show_price">Show </span>price\n            </a>\n        </div>\n    </div>\n</top-bar>\n\n<div class="container">\n    <div class="row">\n        <div class="col-sm-12">Create a new Quote for:</div>\n    </div>\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="radio">\n              <label>\n                <input type="radio" ng-model="customer_type" value="Customer">\n                Customer\n              </label>\n            </div>\n            <div class="radio">\n              <label>\n                <input type="radio" ng-model="customer_type" value="Dealership">\n                Dealership\n              </label>\n            </div>\n        </div>\n    </div>\n    <div class="row" ng-if="customer_type==\'Dealership\'">\n        <div class="col-sm-12">\n\n            <form name="stock_form" class="form top-margin-30">\n                <div class="panel panel-primary" id="panels">\n                    <div class="panel-heading">Create a stock quote</div>\n                    <div class="panel-body">\n                            <div class="col-sm-6">\n                                <label class="form-label">DEALERSHIP</label>\n                                <select class="form-control"\n                                        ng-model="order.dealer_dealership"\n                                        ng-options="dealer.id as dealer.title for dealer in choices.dealerships"\n                                        required>\n                                    <option value="">Select a dealership</option>\n                                </select>\n                            </div>\n\n                            <div class="col-sm-6">\n                                <label class="form-label">DESIRED DELIVERY DATE</label>\n                                <date-dropdowns></date-dropdowns>\n                            </div>\n                    </div>\n                </div>\n                <div class="form-group col-sm-3">\n                    <button type="submit" class="btn btn-primary form-control" ng-click="proceed(stock_form)">Create and proceed</button>\n                </div>\n            </form>\n        </div>\n    </div>\n    <div class="row" ng-if="customer_type==\'Customer\'">\n        <div class="col-sm-12">\n            <form name="customer_form" novalidate class="form top-margin-30" autocomplete="off" form-autofill-fix ng-submit="add_customer_quote(customer_form)">\n                <div class="panel panel-primary" id="panels">\n                    <div class="panel-heading">Create a Customer quote</div>\n                    <div class="panel-body">\n                        <div class="row">\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">DEALERSHIP</label>\n                                <select class="form-control"\n                                        ng-model="order.customer_dealership"\n                                        ng-options="dealer.id as dealer.title for dealer in choices.dealerships">\n                                    <option value="">Select a dealership (optional)</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <!-- Customer details -->\n\n                        <div class="row top-margin-40">\n                            <div class="col-sm-6"><h4>Customer Details</h4></div>\n                            <div class="col-sm-6">\n                                <button class="btn btn-default pull-right">Retrieve customer from leads</button>\n                            </div>\n                        </div>\n\n                        <div class="row top-margin-30">\n                            <div class="col-sm-6"><i>Fields marked with an asterisk are required</i></div>\n                        </div>\n\n                        <div class="row top-margin-20">\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">\n                                    <red-star></red-star>\n                                    FIRST NAME</label>\n                                <input type="text" class="form-control" ng-model="order.customer.first_name" name="first_name" required/>\n                                <required-field form="customer_form" name="customer_form.first_name" label="First Name"></required-field>\n                            </div>\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">\n                                    <red-star></red-star>\n                                    LAST NAME</label>\n                                <input type="text" class="form-control" ng-model="order.customer.last_name" name="last_name" required/>\n                                <required-field form="customer_form" name="customer_form.last_name" label="Last Name"></required-field>\n                            </div>\n                        </div>\n\n                        <div class="row top-margin-20">\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">\n                                    <red-star></red-star>\n                                    EMAIL</label>\n                                <input type="text" class="form-control" ng-model="order.customer.email" name="email" required/>\n                                <required-field form="customer_form" name="customer_form.email" label="Email Address"></required-field>\n                            </div>\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">PARTNER\'S NAME</label>\n                                <input type="text" class="form-control" ng-model="order.customer.partner_name" name="partner_name" />\n                            </div>\n                        </div>\n\n                        <div class="row top-margin-20">\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">\n                                    <red-star></red-star>\n                                    PHONE NUMBER</label>\n                                <input type="text" class="form-control" ng-model="order.customer.phone_number" name="phone_number" required/>\n                                <required-field form="customer_form" name="customer_form.phone_number" label="Phone Number"></required-field>\n                            </div>\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">DESIRED DELIVERY DATE</label>\n                                <div class="date-dropdowns">\n                                    <select class="form-control"\n                                            ng-model="order.desired_dd_day"\n                                            ng-options="day as day for day in days">\n                                        <option value="">dd</option>\n                                    </select>\n                                    <select class="form-control"\n                                            ng-model="order.desired_dd_month"\n                                            ng-options="month[0] as month[1] for month in months">\n                                        <option value="">mm</option>\n                                    </select>\n                                    <select class="form-control"\n                                            ng-model="order.desired_dd_year"\n                                            ng-options="year as year for year in years">\n                                        <option value="">yyyy</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n\n\n                        <!-- Address -->\n\n\n                        <div class="row top-margin-40">\n                            <div class="col-sm-6"><h4>Address</h4></div>\n                        </div>\n\n                        <div class="row top-margin-20">\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">\n                                    REGISTERED OWNER</label>\n                                <input type="text" ng-model="order.physical_add.owner" name="physical_add_owner" class="form-control"/>\n                            </div>\n                        </div>\n\n                        <div class="row top-margin-20">\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">\n                                    STREET ADDRESS</label>\n                                <input type="text" ng-model="order.physical_add.street" name="physical_add_street" class="form-control"/>\n                            </div>\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">\n                                    LOOKUP CITY OR SUBURB</label>\n                                <lookup result="search.physical_suburb"\n                                        on-select="select_physical_suburb" type="suburb_lookup" name="physical_add_suburb" autocomplete="off"></lookup>\n                            </div>\n                        </div>\n\n                        <div class="row top-margin-20">\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">\n                                    CITY / SUBURB</label>\n                                <input type="text"  ng-model="order.physical_add.suburb" name="physical_add_suburb" class="form-control"/>\n                            </div>\n                            <div class="form-group col-sm-4">\n                                <label class="form-label">\n                                    POSTCODE</label>\n                                <input type="text" ng-model="order.physical_add.postcode" name="physical_add_postcode" class="form-control"/>\n                            </div>\n                            <div class="form-group col-sm-2">\n                            </div>\n                        </div>\n\n                        <div class="row top-margin-20">\n                            <div class="form-group col-sm-6">\n                                <label class="form-label">\n                                    STATE</label>\n                                <select  class="form-control"\n                                        ng-model="order.physical_add.state" name="physical_add_state"\n                                        ng-options="state.id as state.title for state in choices.states">\n                                    <option value="">Select a state</option>\n                                </select>\n                            </div>\n\n                        </div>\n\n                        <div class="row top-margin-40">\n\n                            <accordion class="red" close-others="false">\n\n                                <!-- Delivery -->\n\n                                <accordion-group>\n                                    <accordion-heading>\n                                        <div>Add Delivery details (if different)</div>\n                                    </accordion-heading>\n\n                                    <div class="row top-margin-20">\n                                        <div class="form-group col-sm-6">\n                                            <label class="form-label">NAME</label>\n                                            <input type="text" ng-model="order.delivery_add.name" class="form-control"/>\n                                        </div>\n                                    </div>\n\n                                    <div class="row top-margin-20">\n                                        <div class="form-group col-sm-6">\n                                            <label class="form-label">STREET ADDRESS</label>\n                                            <input type="text" ng-model="order.delivery_add.street" class="form-control"/>\n                                        </div>\n                                        <div class="form-group col-sm-6">\n                                            <label class="form-label">LOOKUP CITY OR SUBURB</label>\n                                            <lookup result="search.delivery_suburb"\n                                                on-select="select_delivery_suburb" type="suburb_lookup" autocomplete="off"></lookup>\n                                        </div>\n                                    </div>\n\n                                    <div class="row top-margin-20">\n                                        <div class="form-group col-sm-6">\n                                            <label class="form-label">\n                                                CITY / SUBURB</label>\n                                            <input type="text"  ng-model="order.delivery_add.suburb" name="delivery_add_suburb" class="form-control"/>\n                                        </div>\n                                        <div class="form-group col-sm-4">\n                                            <label class="form-label">POSTCODE</label>\n                                            <input type="text" ng-model="order.delivery_add.postcode" class="form-control"/>\n                                        </div>\n                                        <div class="form-group col-sm-2">\n                                        </div>\n                                    </div>\n\n                                    <div class="row top-margin-20">\n                                        <div class="form-group col-sm-6">\n                                            <label class="form-label">STATE</label>\n                                            <select  class="form-control"\n                                                    ng-model="order.delivery_add.state"\n                                                    ng-options="state.id as state.title for state in choices.states">\n                                                <option value="">Select a state</option>\n                                            </select>\n                                        </div>\n                                    </div>\n\n                                </accordion-group>\n\n\n                                <!-- Invoice -->\n\n                                <accordion-group>\n                                    <accordion-heading>\n                                        <div>Add Invoice details (if different)</div>\n                                    </accordion-heading>\n\n                                    <div class="row top-margin-20">\n                                        <div class="form-group col-sm-6">\n                                            <label class="form-label">NAME</label>\n                                            <input type="text" ng-model="order.invoice_add.name" class="form-control"/>\n                                        </div>\n                                    </div>\n\n                                    <div class="row top-margin-20">\n                                        <div class="form-group col-sm-6">\n                                            <label class="form-label">STREET ADDRESS</label>\n                                            <input type="text" ng-model="order.invoice_add.street" class="form-control"/>\n                                        </div>\n                                        <div class="form-group col-sm-6">\n                                            <label class="form-label">LOOKUP CITY OR SUBURB</label>\n                                            <lookup result="search.invoice_suburb"\n                                                on-select="select_invoice_suburb" type="suburb_lookup" autocomplete="off"></lookup>\n                                        </div>\n                                    </div>\n\n                                    <div class="row top-margin-20">\n                                        <div class="form-group col-sm-6">\n                                            <label class="form-label">\n                                                CITY / SUBURB</label>\n                                            <input type="text"  ng-model="order.invoice_add.suburb" name="invoice_add_suburb" class="form-control"/>\n                                        </div>\n                                        <div class="form-group col-sm-4">\n                                            <label class="form-label">POSTCODE</label>\n                                            <input type="text" ng-model="order.invoice_add.postcode" class="form-control"/>\n                                        </div>\n                                        <div class="form-group col-sm-2"></div>\n                                    </div>\n\n                                    <div class="row top-margin-20">\n                                        <div class="form-group col-sm-6">\n                                            <label class="form-label">STATE</label>\n                                            <select  class="form-control"\n                                                    ng-model="order.invoice_add.state"\n                                                    ng-options="state.id as state.title for state in choices.states">\n                                                <option value="">Select a state</option>\n                                            </select>\n                                        </div>\n                                    </div>\n\n                                </accordion-group>\n                            </accordion>\n\n                        </div>\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="form-group col-sm-3">\n                        <button type="submit" class="btn btn-primary form-control" data-ng-disabled="progress.active()">Create and proceed</button>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="alert alert-success" ng-if="order.insert_successful_message">{{ order.insert_successful_message }}</div>\n                    <div class="alert alert-danger" ng-if="order.insert_failed_message">{{ order.insert_failed_message }}</div>\n                </div>\n\n            </form>\n        </div>\n    </div>\n</div>'}});