webpackJsonp([11],{0:function(e,t,a){e.exports=a(177)},45:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.controller("QuotesController",["$scope","$http","ApiService",function(e,t,s){a(63),e.post=function(e){return s.post("quotes/",e)},e.table_object=null,e.customer_type="Customer",e.choices={},e.customer_form={},e.order={physical_add:{owner:"",street:"",postcode:"",state:"",suburb:""},delivery_add:{name:"",street:"",postcode:"",state:"",suburb:""},invoice_add:{name:"",street:"",postcode:"",state:"",suburb:""},customer:{partner_name:""}},e.order.desired_dd_day=1,e.order.desired_dd_month=2,e.order.desired_dd_year=2016,e.days=[],e.months=[],e.years=[];for(var r=new Date,o=1;o<=31;o++)e.days.push(o);for(var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=0;n<12;n++)e.months.push([n,d[n]]);for(var i=0;i<=20;i++)e.years.push(r.getFullYear()+i);e.post({type:"get_new_pre_data"}).then(function(t){e.choices.dealerships=t.data.list.dealers,e.choices.states=t.data.list.states});var c=function(){return{type:"get_list",search:e.search_id}};e.ajax_config={url:"/api/quotes/",data:c,dataSrc:"list",columns:[{data:"created",title:"Date Created"},{data:"quote_type",title:"Type"},{data:"quoted_for",title:"Quoted For"},{data:"series",title:"Series"},{data:"sales_person",title:"Sales Person"},{data:"retail_price",title:"$ Retail Sale Price"},{data:"",title:""}]},e.table_config={oLanguage:{sLoadingRecords:'<img src="/static/newage/images/rolling.gif">'},bFilter:!1,bLengthChange:!1,columnDefs:[{targets:-1,data:"id",render:function(e,t,a,s){return'<a class="btn btn-default" href="edit_quote?id='+a.id+'">Manage</a>'}}]},e.search=function(t){e.search_id=t.id,e.table_object.ajax.reload()},e.select_physical_suburb=function(t){e.order.physical_add.suburb=t.suburb,e.order.physical_add.postcode=t.postcode,e.order.physical_add.state=t.state_id},e.select_delivery_suburb=function(t){e.order.delivery_add.suburb=t.suburb,e.order.delivery_add.postcode=t.postcode,e.order.delivery_add.state=t.state_id},e.select_invoice_suburb=function(t){e.order.invoice_add.suburb=t.suburb,e.order.invoice_add.postcode=t.postcode,e.order.invoice_add.state=t.state_id},e.add_customer_quote=function(t){t.$valid&&e.post({type:"add_customer_quote",data:e.order}).then(function(t){"fail"===t.data.result?(e.order.insert_successful_message="",e.order.insert_failed_message=t.data.message):(e.order.insert_failed_message="",e.order.insert_successful_message=t.data.message)})}}])},e.exports=t.default},63:function(e,t){},177:function(e,t,a){"use strict";var s=a(10);a(45)(s),s.config(["$stateProvider",function(e){e.state("quote",{url:"",template:a(310),controller:"QuotesController"})}])},310:function(e,t){e.exports='<div class="row">\n<top-bar>\n    <h2>All Quotes</h2>\n\n    <form class="form col-sm-6 searchbox" ng-submit="search()" autocomplete="off">\n        <lookup result="search.text" placeholder="Search by Customer Name or Chassis Number" on-select="search"\n                type="quote_lookup" autocomplete="off"></lookup>\n    </form>\n    <a class="btn btn-primary pull-right" href="../quotes/new" role="button">\n        <i class="glyphicon glyphicon-plus"></i> New Quote\n    </a>\n</top-bar>\n</div>\n\n<div class="container">\n    <div class="row">\n        <ajax-data-table data-table="table_object" data-config="ajax_config"\n                         data-options="table_config"></ajax-data-table>\n    </div>\n</div>'}});